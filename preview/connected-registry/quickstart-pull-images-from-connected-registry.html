<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Quickstart - Pull images from a connected registry | Azure Container Registry</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Use Azure Container Registry CLI commands to configure a client token and pull images from a connected registry.">
    
    <link rel="preload" href="/acr/assets/css/0.styles.cbc79662.css" as="style"><link rel="preload" href="/acr/assets/js/app.12b9c764.js" as="script"><link rel="preload" href="/acr/assets/js/2.1b8306db.js" as="script"><link rel="preload" href="/acr/assets/js/35.44a90178.js" as="script"><link rel="prefetch" href="/acr/assets/js/10.2158970e.js"><link rel="prefetch" href="/acr/assets/js/11.b9797a17.js"><link rel="prefetch" href="/acr/assets/js/12.ebb5b819.js"><link rel="prefetch" href="/acr/assets/js/13.d1075bc6.js"><link rel="prefetch" href="/acr/assets/js/14.5a6b26b4.js"><link rel="prefetch" href="/acr/assets/js/15.9a4f2119.js"><link rel="prefetch" href="/acr/assets/js/16.0d0ab97b.js"><link rel="prefetch" href="/acr/assets/js/17.b601f87f.js"><link rel="prefetch" href="/acr/assets/js/18.62deb55e.js"><link rel="prefetch" href="/acr/assets/js/19.024750da.js"><link rel="prefetch" href="/acr/assets/js/20.3468f2d4.js"><link rel="prefetch" href="/acr/assets/js/21.0d6495c2.js"><link rel="prefetch" href="/acr/assets/js/22.5524202c.js"><link rel="prefetch" href="/acr/assets/js/23.d8b73e72.js"><link rel="prefetch" href="/acr/assets/js/24.306b65a3.js"><link rel="prefetch" href="/acr/assets/js/25.3f040316.js"><link rel="prefetch" href="/acr/assets/js/26.c81371cc.js"><link rel="prefetch" href="/acr/assets/js/27.b4748d89.js"><link rel="prefetch" href="/acr/assets/js/28.2c44f07f.js"><link rel="prefetch" href="/acr/assets/js/29.3566f58e.js"><link rel="prefetch" href="/acr/assets/js/3.4e287d85.js"><link rel="prefetch" href="/acr/assets/js/30.e562cdc4.js"><link rel="prefetch" href="/acr/assets/js/31.1f1b6ac6.js"><link rel="prefetch" href="/acr/assets/js/32.d38149ad.js"><link rel="prefetch" href="/acr/assets/js/33.11078cf1.js"><link rel="prefetch" href="/acr/assets/js/34.f62ac942.js"><link rel="prefetch" href="/acr/assets/js/36.5d932640.js"><link rel="prefetch" href="/acr/assets/js/37.79e81753.js"><link rel="prefetch" href="/acr/assets/js/38.14b304a2.js"><link rel="prefetch" href="/acr/assets/js/39.b9e54586.js"><link rel="prefetch" href="/acr/assets/js/4.981f7769.js"><link rel="prefetch" href="/acr/assets/js/40.8a7fdd64.js"><link rel="prefetch" href="/acr/assets/js/41.13efad4d.js"><link rel="prefetch" href="/acr/assets/js/42.3f0eadf4.js"><link rel="prefetch" href="/acr/assets/js/43.0e37d5fe.js"><link rel="prefetch" href="/acr/assets/js/44.fd968c96.js"><link rel="prefetch" href="/acr/assets/js/45.1d55d1f9.js"><link rel="prefetch" href="/acr/assets/js/46.cb3a8573.js"><link rel="prefetch" href="/acr/assets/js/47.b616ac2b.js"><link rel="prefetch" href="/acr/assets/js/48.f683cda6.js"><link rel="prefetch" href="/acr/assets/js/49.ee420f64.js"><link rel="prefetch" href="/acr/assets/js/5.f3b73239.js"><link rel="prefetch" href="/acr/assets/js/50.e262a55e.js"><link rel="prefetch" href="/acr/assets/js/51.7d78ce5f.js"><link rel="prefetch" href="/acr/assets/js/52.b32d076b.js"><link rel="prefetch" href="/acr/assets/js/53.bea4c6a5.js"><link rel="prefetch" href="/acr/assets/js/6.cda061d9.js"><link rel="prefetch" href="/acr/assets/js/7.75ddc447.js"><link rel="prefetch" href="/acr/assets/js/8.82363d41.js"><link rel="prefetch" href="/acr/assets/js/9.160ef2d6.js">
    <link rel="stylesheet" href="/acr/assets/css/0.styles.cbc79662.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/acr/" class="home-link router-link-active"><img src="/acr/files/acr.svg" alt="Azure Container Registry" class="logo"> <span class="site-name can-hide">Azure Container Registry</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/azure/acr" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/azure/acr" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/acr/" aria-current="page" class="sidebar-link">Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acr/#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/acr/#blog-posts" class="sidebar-link">Blog posts</a></li><li class="sidebar-sub-header"><a href="/acr/#links" class="sidebar-link">Links</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Teleport</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Authentication</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Integration</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="quickstart-pull-images-from-a-connected-registry"><a href="#quickstart-pull-images-from-a-connected-registry" class="header-anchor">#</a> Quickstart: Pull images from a connected registry</h1> <p>In this quickstart, you use <a href="/acr/preview/connected-registry/container-registry-intro.html">Azure Container Registry</a> commands to configure a client token for a connected registry and use this client token to pull images. You can review the <a href="/acr/preview/connected-registry/intro-connected-registry.html">ACR connected registry introduction</a> for details about the connected registry feature of Azure Container Registry.</p> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <ul><li><p>Use <a href="https://docs.microsoft.com/en-us/azure/cloud-shell/quickstart" target="_blank" rel="noopener noreferrer">Azure Cloud Shell<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> using the bash environment.</p> <p><a href="https://shell.azure.com/" target="_blank" rel="noopener noreferrer"><img src="https://docs.microsoft.com/en-us/azure/includes/media/cloud-shell-try-it/hdi-launch-cloud-shell.png" alt="https://docs.microsoft.com/en-us/azure/includes/media/cloud-shell-try-it/hdi-launch-cloud-shell.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>If you prefer, <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli" target="_blank" rel="noopener noreferrer">install<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> the Azure CLI to run CLI reference commands.</p> <ul><li>If you're using a local install, sign in with Azure CLI by using the <a href="https://docs.microsoft.com/en-us/cli/azure/reference-index#az_login" target="_blank" rel="noopener noreferrer">az login<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> command. To finish the authentication process, follow the steps displayed in your terminal. See <a href="https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli" target="_blank" rel="noopener noreferrer">Sign in with Azure CLI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for additional sign-in options.</li> <li>When you're prompted, install Azure CLI extensions on first use. For more information about extensions, see <a href="https://docs.microsoft.com/en-us/cli/azure/azure-cli-extensions-overview" target="_blank" rel="noopener noreferrer">Use extensions with Azure CLI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Run <a href="https://docs.microsoft.com/en-us/cli/azure/reference-index?#az_version" target="_blank" rel="noopener noreferrer">az version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to find the version and dependent libraries that are installed. To upgrade to the latest version, run <a href="https://docs.microsoft.com/en-us/cli/azure/reference-index?#az_upgrade" target="_blank" rel="noopener noreferrer">az upgrade<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul></li> <li><p>The Azure CLI commands in this article are formatted for the Bash shell. If you're using a different shell like PowerShell or Command Prompt, you may need to adjust line continuation characters or variable assignment lines accordingly. This article uses variables to minimize the amount of command editing required.</p></li></ul> <h2 id="before-you-begin"><a href="#before-you-begin" class="header-anchor">#</a> Before you begin</h2> <p>Make sure that you have created the connected registry resource in Azure as described in the <a href="/acr/preview/connected-registry/quickstart-connected-registry-cli.html">Create connected registry using the CLI</a> quickstart guide and have a connected registry deployed on your premises as described in <a href="/acr/preview/connected-registry/quickstart-deploy-connected-registry-iot-edge-cli.html">Quickstart: Deploy a connected registry to an IoT Edge device</a> or <a href="/acr/preview/connected-registry/quickstart-deploy-connected-registry-azure-arc.html">Quickstart: Deploy a connected registry to an Azure Arc cluster</a>.</p> <h2 id="create-a-scope-map"><a href="#create-a-scope-map" class="header-anchor">#</a> Create a scope map</h2> <p>Use the following CLI command to create a scope map for read access to the <code>hello-world</code> repository:</p> <div class="language-azurecli line-numbers-mode"><pre class="language-text"><code>az acr scope-map create \
  --name hello-world-scopemap \
  --registry mycontainerregistry001 \
  --repository hello-world content/read \
  --description &quot;Scope map for the connected registry.&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="create-a-client-token"><a href="#create-a-client-token" class="header-anchor">#</a> Create a client token</h2> <p>Use the following CLI command to create a client token and associate it with the newly created scope map:</p> <div class="language-azurecli line-numbers-mode"><pre class="language-text"><code>az acr token create \
  --name myconnectedregistry-client-token \
  --registry mycontainerregistry001 \
  --scope-map hello-world-scopemap
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The command will return details about the newly generated token including passwords.</p> <blockquote><p>[!IMPORTANT]
Make sure that you save the generated passwords. Those are one-time passwords and cannot be retrieved. You can generate new passwords using the <a href="https://docs.microsoft.com/cli/azure/acr/token/credential?view=azure-cli-latest#az_acr_token_credential_generate" target="_blank" rel="noopener noreferrer">az acr token credential generate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> command.</p></blockquote> <h2 id="update-the-connected-registry-with-the-client-token"><a href="#update-the-connected-registry-with-the-client-token" class="header-anchor">#</a> Update the connected registry with the client token</h2> <p>Use the following CLI command to update the connected registry with the newly created client token:</p> <div class="language-azurecli line-numbers-mode"><pre class="language-text"><code>az acr connected-registry update \
  --name myconnectedregistry \
  --registry mycontainerregistry001 \
  --add-client-token myconnectedregistry-client-token
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="pull-an-image-from-the-connected-registry"><a href="#pull-an-image-from-the-connected-registry" class="header-anchor">#</a> Pull an image from the connected registry</h2> <p>From a machine with access to the connected registry instance, use the following command to sign into the connected registry:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker login -u myconnectedregistry-client-token -p &lt;use_the_password_for_the_token&gt; &lt;use_the_ip_address_of_the_connected_registry&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Use the following command to pull the <code>hello-world</code> image:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull &lt;use_the_ip_address_of_the_connected_registry&gt;/hello-world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="next-steps"><a href="#next-steps" class="header-anchor">#</a> Next steps</h2> <p>In this quickstart, you learned how to configure a client token for the connected registry and pull a container image.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azure/acr/edit/master/docs/preview/connected-registry/quickstart-pull-images-from-connected-registry.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/acr/assets/js/app.12b9c764.js" defer></script><script src="/acr/assets/js/2.1b8306db.js" defer></script><script src="/acr/assets/js/35.44a90178.js" defer></script>
  </body>
</html>
